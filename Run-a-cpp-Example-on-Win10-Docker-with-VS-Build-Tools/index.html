<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"kuberme.cn","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Sometimes when you need to use a cpp runtime environments on Windows system for your special applications, you can just install a Visuo Studio xxx to do it. But if you want to dilivery it to cloud env">
<meta name="keywords" content="Docker">
<meta property="og:type" content="article">
<meta property="og:title" content="Run a cpp Example on Win10 Docker with VS Build Tools">
<meta property="og:url" content="kuberme.cn/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/index.html">
<meta property="og:site_name" content="Fly with You">
<meta property="og:description" content="Sometimes when you need to use a cpp runtime environments on Windows system for your special applications, you can just install a Visuo Studio xxx to do it. But if you want to dilivery it to cloud env">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/windows_feature.png">
<meta property="og:image" content="http://images.5bug.wang//2018/03/201803016053_9660.png">
<meta property="og:image" content="https://yqfile.alicdn.com/b7e02a92cc7689b498dc430e3a6b264c332c9c1f.png">
<meta property="og:image" content="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/check_images.png">
<meta property="og:image" content="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/start_container.png">
<meta property="og:image" content="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/hello_world.png">
<meta property="og:updated_time" content="2020-04-15T03:23:32.828Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Run a cpp Example on Win10 Docker with VS Build Tools">
<meta name="twitter:description" content="Sometimes when you need to use a cpp runtime environments on Windows system for your special applications, you can just install a Visuo Studio xxx to do it. But if you want to dilivery it to cloud env">
<meta name="twitter:image" content="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/windows_feature.png">

<link rel="canonical" href="kuberme.cn/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Run a cpp Example on Win10 Docker with VS Build Tools | Fly with You</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Fly with You</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">多谷黑芝麻 & 蜂蜜柚子茶</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="kuberme.cn/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Kubert">
      <meta itemprop="description" content="记录生活 知识管理 思考感悟">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fly with You">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Run a cpp Example on Win10 Docker with VS Build Tools
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-05-15 16:40:11" itemprop="dateCreated datePublished" datetime="2017-05-15T16:40:11+08:00">2017-05-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/DevOps/" itemprop="url" rel="index"><span itemprop="name">DevOps</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Sometimes when you need to use a cpp runtime environments on Windows system for your special applications, you can just install a Visuo Studio xxx to do it. But if you want to dilivery it to cloud environment, maybe you need make it into a Docker just like me. </p>
<a id="more"></a>
<!--toc-->
<h3 id="Install-Docker-into-Win10"><a href="#Install-Docker-into-Win10" class="headerlink" title="Install Docker into Win10"></a>Install Docker into Win10</h3><ol>
<li><p>Install <a href="https://docs.docker.com/docker-for-windows/install/" target="_blank" rel="noopener">Docker CE</a> in one computer with Windows 10 system, which its Virtualization must to be turn on firstly in your BIOS.</p>
</li>
<li><p>Note that, you need to log out once to complete installation when the installation succeeded.</p>
</li>
<li><p>After it, when you start Docker, it will check your computer setting of Hyper-V. </p>
<p><img src="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/windows_feature.png" alt="Windows Feature"><br>Hyper-v must be turn on status when you run Docker, which means your Virtual Box can not be used in the meantime. maybe there will have one computer restart here, don’t panic, this is the last restart if you only use Docker instead of virtual machines.</p>
</li>
<li><p>After Docker started, you can find a penguin log in your taskbar. here has some tips to help you test Docker or improve Docker.</p>
<ol>
<li><p>Switch Registry: </p>
<p>You can switch your registry to <a href="https://registry.docker-cn.com/" target="_blank" rel="noopener">China Official Registry</a> by edit the Daemon which by right click your Docker to choose Setting. Or you can change registry to a private registry like your aliyun’s speeder address.<br><img src="http://images.5bug.wang//2018/03/201803016053_9660.png" alt="Switch Regostry"></p>
</li>
<li><p>Switch to Windows Container Mode: </p>
<p>In order to use windows images in Docker, you must change mode from Linux Container to Windows Container. after that, you can check it through <code>docker version</code> command.</p>
<p><img src="https://yqfile.alicdn.com/b7e02a92cc7689b498dc430e3a6b264c332c9c1f.png" alt="switch"></p>
</li>
<li><p>First example of windows container: execute <code>docker version</code> in your cmd.exe, then the client and server information for Docker will be shown. After that,  you can execute <code>docker run microsoft/sample-dotnet</code> in your cmd.exe or Windows PowerShell.exe (more popular and more convenient) . if there has a logo output, your installation would be correct.</p>
</li>
</ol>
</li>
</ol>
<h3 id="Load-a-Windows-Image-with-VS-Build-Tools"><a href="#Load-a-Windows-Image-with-VS-Build-Tools" class="headerlink" title="Load a Windows Image with VS Build Tools"></a>Load a Windows Image with VS Build Tools</h3><ol>
<li><p>Basic Commands: </p>
<p>After your Docker installation succeeded, you can always use it in your PowerShell through some usual commands to get some basic status like the bellowed.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#list running containers</span><br><span class="line">docker ps</span><br><span class="line">#list all containers(include running/exited/created)</span><br><span class="line">docker ps -a</span><br><span class="line">#list images</span><br><span class="line">docker images</span><br><span class="line">#check basic info of your Docker</span><br><span class="line">docker info</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Load Images</strong>: </p>
<p>So, if you want to run a container with cpp files in it, you need to have a windows image with VS build tools environment first. I already packed a ready image, this image is built by <a href="https://github.com/kubertalk/DockerImage-Winserver/blob/master/Dockerfile?1556451298000" target="_blank" rel="noopener">Dockerfile</a>, which is from a source image <code>microsoft/windowsservercore</code> with Visual Studio Build Tools in it. You just need to load my image into a new folder on your system through <strong><em><code>docker load -i \\cd-srv04\pxa\Projects\simulation\docker-images\winservercore-vstools.tar</code></em></strong>. </p>
<p>PS: if you want to what’s the difference of <code>windowsservercore</code> and <code>nanoserver</code>, please visit <a href="https://docs.microsoft.com/zh-cn/virtualization/windowscontainers/deploy-containers/deploy-containers-on-server" target="_blank" rel="noopener">here</a>.</p>
<p>if you want to know how to build your own windows image, please visit <a href="https://github.com/docker/labs/blob/master/windows/windows-containers/WindowsContainers.md?1556446332153" target="_blank" rel="noopener">here</a>.</p>
<p>and if you want to know the how to build and save the image we are using, and the please see <a href="https://github.com/kubertalk/DockerImage-Winserver" target="_blank" rel="noopener">here</a>. </p>
</li>
<li><p>Check Images:</p>
<p>Use <strong><code>docker images</code></strong> to check if this image already in your system when it load finished.</p>
<p><img src="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/check_images.png" alt="Check Images"></p>
</li>
</ol>
<h3 id="Start-a-Container-with-a-Interactive-Cmdlet"><a href="#Start-a-Container-with-a-Interactive-Cmdlet" class="headerlink" title="Start a Container with a Interactive Cmdlet"></a>Start a Container with a Interactive Cmdlet</h3><ol>
<li><p>After the image load successfully, you can run a container with this image, or you can build other images using this image.</p>
</li>
<li><p>Start a Container:</p>
<p>Use <strong><em><code>docker run -it -v $host-code-addr:$container-code-addr win-vs</code></em></strong> to start a container with a interactive cmdlet, just like the below picture. Then you can do everything you like in this container.</p>
<p><img src="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/start_container.png" alt="Start Container"></p>
</li>
<li><p>About the above command, just give you some tips for it:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$host-code-addr = c:/xxx/code   #code address in host computer, means container outer</span><br><span class="line">$container-code-addr = c:/code  #code address in container inner</span><br><span class="line"></span><br><span class="line">docker run -it -v $host-code-addr:$container-code-addr win-vs</span><br><span class="line"># -i,--Interactive: keep STDIN open</span><br><span class="line"># -t,--tty : allocate a pseudo-TTY</span><br><span class="line"># -v,--volume list: Bind mount a volume</span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="4">
<li><p><strong>Compile and Run a Hello World</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd code</span><br><span class="line">#compile your files</span><br><span class="line">cl .\hello.cpp /EHsc</span><br><span class="line">#run your application</span><br><span class="line">.\hello</span><br></pre></td></tr></table></figure>

<p><img src="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/hello_world.png" alt="Run Hello-World"></p>
</li>
<li><p>Move your whole application of vc++ code to your shared volume on your host computer, and make it in your container. just have a try !</p>
</li>
<li><p>After test or debug on this pseudo cmdlet, you can use <code>exit</code> or <code>ctl+P+Q</code> to quit this window. Then you can use <code>docker start/restart -i $containerID</code>  to go back this container’s cmdlet.</p>
</li>
</ol>
<h3 id="QA-and-Issues"><a href="#QA-and-Issues" class="headerlink" title="QA and Issues"></a>QA and Issues</h3><p><strong>Have a fun and if you have any issues or problem, please don’t hesitate to contact me with <a href="mailto:kubertqiu@hotmail.com" target="_blank" rel="noopener">kubertqiu@hotmail.com</a></strong>.</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Docker/" rel="tag"># Docker</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/Top-8-Sorting-Algorithm(cpp)/" rel="prev" title="八大排序算法  by C++ (转)">
      <i class="fa fa-chevron-left"></i> 八大排序算法  by C++ (转)
    </a></div>
      <div class="post-nav-item">
    <a href="/Hacker Marathon Note of 2017/" rel="next" title="201705 交大黑客松（Hacker Marathon)纪要">
      201705 交大黑客松（Hacker Marathon)纪要 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-Docker-into-Win10"><span class="nav-number">1.</span> <span class="nav-text">Install Docker into Win10</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Load-a-Windows-Image-with-VS-Build-Tools"><span class="nav-number">2.</span> <span class="nav-text">Load a Windows Image with VS Build Tools</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Start-a-Container-with-a-Interactive-Cmdlet"><span class="nav-number">3.</span> <span class="nav-text">Start a Container with a Interactive Cmdlet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#QA-and-Issues"><span class="nav-number">4.</span> <span class="nav-text">QA and Issues</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Kubert</p>
  <div class="site-description" itemprop="description">记录生活 知识管理 思考感悟</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">18</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kubert</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
