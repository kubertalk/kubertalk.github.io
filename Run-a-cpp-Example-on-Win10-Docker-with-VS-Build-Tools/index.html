<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>Run a cpp Example on Win10 Docker with VS Build Tools | Fly with You</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Sometimes when you need to use a cpp runtime environments on Windows system for your special applications, you can just install a Visuo Studio xxx to do it. But if you want to dilivery it to cloud env">
<meta name="keywords" content="Docker">
<meta property="og:type" content="article">
<meta property="og:title" content="Run a cpp Example on Win10 Docker with VS Build Tools">
<meta property="og:url" content="kuberme.cn/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/index.html">
<meta property="og:site_name" content="Fly with You">
<meta property="og:description" content="Sometimes when you need to use a cpp runtime environments on Windows system for your special applications, you can just install a Visuo Studio xxx to do it. But if you want to dilivery it to cloud env">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/windows_feature.png">
<meta property="og:image" content="http://images.5bug.wang//2018/03/201803016053_9660.png">
<meta property="og:image" content="https://yqfile.alicdn.com/b7e02a92cc7689b498dc430e3a6b264c332c9c1f.png">
<meta property="og:image" content="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/check_images.png">
<meta property="og:image" content="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/start_container.png">
<meta property="og:image" content="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/hello_world.png">
<meta property="og:updated_time" content="2020-04-15T03:23:32.828Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Run a cpp Example on Win10 Docker with VS Build Tools">
<meta name="twitter:description" content="Sometimes when you need to use a cpp runtime environments on Windows system for your special applications, you can just install a Visuo Studio xxx to do it. But if you want to dilivery it to cloud env">
<meta name="twitter:image" content="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/windows_feature.png">
  
    <link rel="alternate" href="/atom.xml" title="Fly with You" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Fly with You</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">多谷黑芝麻 &amp; 蜂蜜柚子茶</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="kuberme.cn"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/" class="article-date">
  <time datetime="2017-05-15T08:40:11.000Z" itemprop="datePublished">2017-05-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/DevOps/">DevOps</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Run a cpp Example on Win10 Docker with VS Build Tools
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Sometimes when you need to use a cpp runtime environments on Windows system for your special applications, you can just install a Visuo Studio xxx to do it. But if you want to dilivery it to cloud environment, maybe you need make it into a Docker just like me. </p>
<a id="more"></a>
<!--toc-->
<h3 id="Install-Docker-into-Win10"><a href="#Install-Docker-into-Win10" class="headerlink" title="Install Docker into Win10"></a>Install Docker into Win10</h3><ol>
<li><p>Install <a href="https://docs.docker.com/docker-for-windows/install/" target="_blank" rel="noopener">Docker CE</a> in one computer with Windows 10 system, which its Virtualization must to be turn on firstly in your BIOS.</p>
</li>
<li><p>Note that, you need to log out once to complete installation when the installation succeeded.</p>
</li>
<li><p>After it, when you start Docker, it will check your computer setting of Hyper-V. </p>
<p><img src="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/windows_feature.png" alt="Windows Feature"><br>Hyper-v must be turn on status when you run Docker, which means your Virtual Box can not be used in the meantime. maybe there will have one computer restart here, don’t panic, this is the last restart if you only use Docker instead of virtual machines.</p>
</li>
<li><p>After Docker started, you can find a penguin log in your taskbar. here has some tips to help you test Docker or improve Docker.</p>
<ol>
<li><p>Switch Registry: </p>
<p>You can switch your registry to <a href="https://registry.docker-cn.com/" target="_blank" rel="noopener">China Official Registry</a> by edit the Daemon which by right click your Docker to choose Setting. Or you can change registry to a private registry like your aliyun’s speeder address.<br><img src="http://images.5bug.wang//2018/03/201803016053_9660.png" alt="Switch Regostry"></p>
</li>
<li><p>Switch to Windows Container Mode: </p>
<p>In order to use windows images in Docker, you must change mode from Linux Container to Windows Container. after that, you can check it through <code>docker version</code> command.</p>
<p><img src="https://yqfile.alicdn.com/b7e02a92cc7689b498dc430e3a6b264c332c9c1f.png" alt="switch"></p>
</li>
<li><p>First example of windows container: execute <code>docker version</code> in your cmd.exe, then the client and server information for Docker will be shown. After that,  you can execute <code>docker run microsoft/sample-dotnet</code> in your cmd.exe or Windows PowerShell.exe (more popular and more convenient) . if there has a logo output, your installation would be correct.</p>
</li>
</ol>
</li>
</ol>
<h3 id="Load-a-Windows-Image-with-VS-Build-Tools"><a href="#Load-a-Windows-Image-with-VS-Build-Tools" class="headerlink" title="Load a Windows Image with VS Build Tools"></a>Load a Windows Image with VS Build Tools</h3><ol>
<li><p>Basic Commands: </p>
<p>After your Docker installation succeeded, you can always use it in your PowerShell through some usual commands to get some basic status like the bellowed.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#list running containers</span><br><span class="line">docker ps</span><br><span class="line">#list all containers(include running/exited/created)</span><br><span class="line">docker ps -a</span><br><span class="line">#list images</span><br><span class="line">docker images</span><br><span class="line">#check basic info of your Docker</span><br><span class="line">docker info</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Load Images</strong>: </p>
<p>So, if you want to run a container with cpp files in it, you need to have a windows image with VS build tools environment first. I already packed a ready image, this image is built by <a href="https://github.com/kubertalk/DockerImage-Winserver/blob/master/Dockerfile?1556451298000" target="_blank" rel="noopener">Dockerfile</a>, which is from a source image <code>microsoft/windowsservercore</code> with Visual Studio Build Tools in it. You just need to load my image into a new folder on your system through <strong><em><code>docker load -i \\cd-srv04\pxa\Projects\simulation\docker-images\winservercore-vstools.tar</code></em></strong>. </p>
<p>PS: if you want to what’s the difference of <code>windowsservercore</code> and <code>nanoserver</code>, please visit <a href="https://docs.microsoft.com/zh-cn/virtualization/windowscontainers/deploy-containers/deploy-containers-on-server" target="_blank" rel="noopener">here</a>.</p>
<p>if you want to know how to build your own windows image, please visit <a href="https://github.com/docker/labs/blob/master/windows/windows-containers/WindowsContainers.md?1556446332153" target="_blank" rel="noopener">here</a>.</p>
<p>and if you want to know the how to build and save the image we are using, and the please see <a href="https://github.com/kubertalk/DockerImage-Winserver" target="_blank" rel="noopener">here</a>. </p>
</li>
<li><p>Check Images:</p>
<p>Use <strong><code>docker images</code></strong> to check if this image already in your system when it load finished.</p>
<p><img src="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/check_images.png" alt="Check Images"></p>
</li>
</ol>
<h3 id="Start-a-Container-with-a-Interactive-Cmdlet"><a href="#Start-a-Container-with-a-Interactive-Cmdlet" class="headerlink" title="Start a Container with a Interactive Cmdlet"></a>Start a Container with a Interactive Cmdlet</h3><ol>
<li><p>After the image load successfully, you can run a container with this image, or you can build other images using this image.</p>
</li>
<li><p>Start a Container:</p>
<p>Use <strong><em><code>docker run -it -v $host-code-addr:$container-code-addr win-vs</code></em></strong> to start a container with a interactive cmdlet, just like the below picture. Then you can do everything you like in this container.</p>
<p><img src="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/start_container.png" alt="Start Container"></p>
</li>
<li><p>About the above command, just give you some tips for it:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$host-code-addr = c:/xxx/code   #code address in host computer, means container outer</span><br><span class="line">$container-code-addr = c:/code  #code address in container inner</span><br><span class="line"></span><br><span class="line">docker run -it -v $host-code-addr:$container-code-addr win-vs</span><br><span class="line"># -i,--Interactive: keep STDIN open</span><br><span class="line"># -t,--tty : allocate a pseudo-TTY</span><br><span class="line"># -v,--volume list: Bind mount a volume</span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="4">
<li><p><strong>Compile and Run a Hello World</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd code</span><br><span class="line">#compile your files</span><br><span class="line">cl .\hello.cpp /EHsc</span><br><span class="line">#run your application</span><br><span class="line">.\hello</span><br></pre></td></tr></table></figure>

<p><img src="http://blog.kuberfly.me/2017/05/15/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/hello_world.png" alt="Run Hello-World"></p>
</li>
<li><p>Move your whole application of vc++ code to your shared volume on your host computer, and make it in your container. just have a try !</p>
</li>
<li><p>After test or debug on this pseudo cmdlet, you can use <code>exit</code> or <code>ctl+P+Q</code> to quit this window. Then you can use <code>docker start/restart -i $containerID</code>  to go back this container’s cmdlet.</p>
</li>
</ol>
<h3 id="QA-and-Issues"><a href="#QA-and-Issues" class="headerlink" title="QA and Issues"></a>QA and Issues</h3><p><strong>Have a fun and if you have any issues or problem, please don’t hesitate to contact me with <a href="mailto:kubertqiu@hotmail.com" target="_blank" rel="noopener">kubertqiu@hotmail.com</a></strong>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="kuberme.cn/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/" data-id="ck9gt25iy0014034g3sy4qqt9" class="article-share-link">Share</a>
      
        <a href="kuberme.cn/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/Hacker Marathon Note of 2017/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          201705 交大黑客松（Hacker Marathon)纪要
        
      </div>
    </a>
  
  
    <a href="/Top-8-Sorting-Algorithm(cpp)/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">八大排序算法  by C++ (转)</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/C/Compiler/">Compiler</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/KuberTalk/">KuberTalk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/研究僧日常/">研究僧日常</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/研究僧日常/操作系统/">操作系统</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CUDA/">CUDA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GCC/">GCC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jetson-TK1/">Jetson TK1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jetson-TX1/">Jetson TX1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二分查找/">二分查找</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/冒泡排序/">冒泡排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基数排序/">基数排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/堆排序/">堆排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/希尔排序/">希尔排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/归并排序/">归并排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/快速排序/">快速排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/插入排序/">插入排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/操作系统/">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库事务/">数据库事务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库索引/">数据库索引</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库锁/">数据库锁</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/智能小车/">智能小车</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/栈/">栈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/桶排序/">桶排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计数排序/">计数排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/选择排序/">选择排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/递归/">递归</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/链表/">链表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/队列/">队列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CUDA/" style="font-size: 13.33px;">CUDA</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/GCC/" style="font-size: 10px;">GCC</a> <a href="/tags/Jetson-TK1/" style="font-size: 10px;">Jetson TK1</a> <a href="/tags/Jetson-TX1/" style="font-size: 10px;">Jetson TX1</a> <a href="/tags/二分查找/" style="font-size: 10px;">二分查找</a> <a href="/tags/冒泡排序/" style="font-size: 13.33px;">冒泡排序</a> <a href="/tags/基数排序/" style="font-size: 13.33px;">基数排序</a> <a href="/tags/堆排序/" style="font-size: 10px;">堆排序</a> <a href="/tags/希尔排序/" style="font-size: 10px;">希尔排序</a> <a href="/tags/归并排序/" style="font-size: 16.67px;">归并排序</a> <a href="/tags/快速排序/" style="font-size: 16.67px;">快速排序</a> <a href="/tags/插入排序/" style="font-size: 13.33px;">插入排序</a> <a href="/tags/操作系统/" style="font-size: 10px;">操作系统</a> <a href="/tags/数据库事务/" style="font-size: 10px;">数据库事务</a> <a href="/tags/数据库索引/" style="font-size: 10px;">数据库索引</a> <a href="/tags/数据库锁/" style="font-size: 10px;">数据库锁</a> <a href="/tags/数据结构/" style="font-size: 20px;">数据结构</a> <a href="/tags/智能小车/" style="font-size: 10px;">智能小车</a> <a href="/tags/栈/" style="font-size: 10px;">栈</a> <a href="/tags/桶排序/" style="font-size: 13.33px;">桶排序</a> <a href="/tags/计数排序/" style="font-size: 10px;">计数排序</a> <a href="/tags/选择排序/" style="font-size: 13.33px;">选择排序</a> <a href="/tags/递归/" style="font-size: 10px;">递归</a> <a href="/tags/链表/" style="font-size: 13.33px;">链表</a> <a href="/tags/队列/" style="font-size: 10px;">队列</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/Data-Structure-11-Binary Search-1/">数据结构篇笔记-11-二分查找(上)</a>
          </li>
        
          <li>
            <a href="/Data-Structure-10-Sorting-4/">数据结构篇笔记-10-排序算法小结</a>
          </li>
        
          <li>
            <a href="/Data-Structure-9-Sorting-3/">数据结构篇笔记-9-桶&amp;计数&amp;基数排序</a>
          </li>
        
          <li>
            <a href="/Data-Structure-8-Sorting-2/">数据结构篇笔记-8-归并&amp;快速排序</a>
          </li>
        
          <li>
            <a href="/Data-Structure-7-Sorting-1/">数据结构篇笔记-7-冒泡&amp;插入&amp;选择排序</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Kubert<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'kuberme';
  
  var disqus_url = 'kuberme.cn/Run-a-cpp-Example-on-Win10-Docker-with-VS-Build-Tools/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>